<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/368ad53414945bb5.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-9edee2920554d0a5.js"/><script src="/_next/static/chunks/4bd1b696-aaa82ed8fded2523.js" async=""></script><script src="/_next/static/chunks/684-f8f0857a988aca6f.js" async=""></script><script src="/_next/static/chunks/main-app-b422431e092c98bc.js" async=""></script><script src="/_next/static/chunks/874-6d7083817be44b40.js" async=""></script><script src="/_next/static/chunks/app/layout-aff72ef278dd2b27.js" async=""></script><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2657417531473772" crossorigin="anonymous"></script><script src="/_next/static/chunks/63-745fd7e3cef5e4b8.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bid%5D/page-07794ac7f5eb2364.js" async=""></script><title>Comstering&#x27;s Dev Notes</title><meta name="description" content="Comstering&#x27;s personal development blog"/><meta name="keywords" content="Comstering, 개발 블로그, Dev Notes, Programming, Software Development"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="1024x1024"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="min-h-screen flex flex-col font-sans transition-colors duration-500 ease-in-out bg-slate-50 dark:bg-gray-950 text-gray-900 dark:text-gray-100"><div class="fixed inset-0 overflow-hidden pointer-events-none -z-10"><div class="absolute -top-40 -left-40 w-80 h-80 bg-sky-500/10 dark:bg-sky-500/5 rounded-full blur-[100px]"></div><div class="absolute top-1/2 -right-40 w-96 h-96 bg-indigo-500/10 dark:bg-indigo-500/5 rounded-full blur-[120px]"></div></div><header class="sticky top-0 z-[60] bg-white/70 dark:bg-gray-950/70 backdrop-blur-xl border-b border-gray-100 dark:border-gray-900"><div class="container mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center justify-between h-20"><div class="flex-shrink-0"><a class="group flex items-center gap-2" href="/"><div class="w-10 h-10 bg-gradient-to-br from-sky-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-black shadow-lg shadow-sky-500/20 group-hover:rotate-12 transition-transform">D</div><span class="text-2xl font-black text-gray-900 dark:text-white tracking-tighter">Dev<span class="text-sky-500">Notes</span></span></a></div><nav class="hidden md:flex items-center space-x-10"><a class="text-gray-500 dark:text-gray-400 hover:text-sky-500 dark:hover:text-sky-400 transition-all font-bold" href="/">HOME</a><a class="text-gray-500 dark:text-gray-400 hover:text-sky-500 dark:hover:text-sky-400 transition-all font-bold" href="/about">ABOUT</a><div class="h-6 w-[1px] bg-gray-200 dark:bg-gray-800 mx-2"></div><div class="w-6 h-6"></div></nav><div class="md:hidden"><div class="w-6 h-6"></div></div></div></div></header><main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10"><article class="max-w-3xl mx-auto"><header class="mb-12 space-y-8"><div class="flex justify-center"><a class="text-xs font-bold text-sky-500 flex items-center hover:gap-2 transition-all" href="/"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>BACK TO BLOG</a></div><div class="text-center space-y-4"><h1 class="text-4xl md:text-5xl font-black text-gray-900 dark:text-white leading-tight">EKS에 Cilium CNI 설치하기 (with CNI Chaining AWS VPC CNI Plugin)</h1><div class="flex items-center justify-center gap-4 text-sm text-gray-500 font-medium"><span>2025-09-01</span><span class="w-1 h-1 bg-gray-300 rounded-full"></span><span>6 min read</span></div></div><div class="rounded-3xl overflow-hidden shadow-2xl shadow-sky-500/10 border border-gray-200 dark:border-gray-800 aspect-[21/9]"><img alt="EKS에 Cilium CNI 설치하기 (with CNI Chaining AWS VPC CNI Plugin)" loading="lazy" width="840" height="360" decoding="async" data-nimg="1" class="w-full h-full object-cover" style="color:transparent" src="/images/posts/thumbnails/eks-cilium.png"/></div></header><div class="prose prose-lg dark:prose-invert max-w-none"><div><h2>Cilium CNI</h2>
<h3>Networking Mode</h3>
<p>Cilium에는 Networking Mode가 2가지로 구분된다.</p>
<ul>
<li>Overlay: 캡슐화 기반 가상 네트워크</li>
<li>Native routing: Linux Host의 라우팅 테이블을 사용</li>
</ul>
<h3>AWS VPC CNI Chaining</h3>
<p>AWS VPC CNI와 Chaining을 할 때는 위 두 모드 중에서 Native routing mode를 사용해야한다.</p>
<p>Native Routing에능 아래와 같은 내용이 적혀있다.</p>
<p>When to use this mode: This mode is for advanced users and requires some awareness of the underlying networking infrastructure. This mode works well with:</p>
<ul>
<li>Native IPv6 networks</li>
<li>In conjunction with cloud network routers</li>
<li>If you are already running routing daemons</li>
</ul>
<p>AWS VPC CNI를 사용하면 routing daemon을 AWS VPC CNI가 담당하기 때문에 overlay mode가 아닌 Native routing mode로 네트워킹을 선택해야한다.</p>
<h2>Install Cilium CNI in EKS</h2>
<h3>helm values</h3>
<pre><code class="hljs language-yaml"><span class="hljs-comment"># Kube-Proxy를 삭제할 경우 반드시 필요</span>
<span class="hljs-attr">k8sServiceHost:</span> { <span class="hljs-string">eks-api-endpoint</span> }
<span class="hljs-attr">k8sServicePort:</span> <span class="hljs-number">443</span>

<span class="hljs-attr">cluster:</span>
  <span class="hljs-attr">name:</span> { <span class="hljs-string">cluster</span> <span class="hljs-string">name</span> }
  <span class="hljs-attr">id:</span> <span class="hljs-number">1</span>

<span class="hljs-comment"># CNI 설정: VPC CNI와 chaining 모드로 사용</span>
<span class="hljs-attr">cni:</span>
  <span class="hljs-attr">chainingMode:</span> <span class="hljs-string">aws-cni</span> <span class="hljs-comment"># AWS CNI와 연결되는 chaining 모드 사용</span>
  <span class="hljs-attr">exclusive:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># aws-node DaemonSet도 계속 실행되도록 허용</span>

<span class="hljs-comment"># Cilium 설정: ENI 기반 라우팅을 사용하여 VPC와 통합</span>
<span class="hljs-attr">routingMode:</span> <span class="hljs-string">native</span> <span class="hljs-comment"># 네이티브 라우팅 모드를 사용하여 터널링을 비활성화합니다.</span>

<span class="hljs-comment"># Masquerade (SNAT) 설정: 필요한 경우에만 eBPF를 사용하여 SNAT 수행</span>
<span class="hljs-attr">bpf:</span>
  <span class="hljs-attr">masquerade:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># 활성화를 하면 ipv4NativeRoutingCIDR values에 해당하는 대역과 native Route Table에서 local로 보내는 Rule이 있는 대역 제외 모든 대역에 대해 eBPF를 활용한 SNAT 활성화</span>
<span class="hljs-comment">#  # 이 설정은 cni chaining을 하고 있다면 사용 불가</span>
<span class="hljs-comment">#  hostLegacyRouting: false   # host network에서 발생하는 트래픽에 대해 legacy routing(iptables)를 사용하지 않도록 설정, eBPF를 사용하여 처리</span>

<span class="hljs-comment"># bpf.masquerade 설정: eBPF 기반 SNAT 활성화(NodePort 활설화 필수)</span>
<span class="hljs-attr">nodePort:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># NodePort 서비스에 대한 eBPF 기반 처리 활성화</span>

<span class="hljs-comment"># Cilium 설정: eBPF 소켓 로드 밸런싱</span>
<span class="hljs-attr">socketLB:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Cilium의 eBPF 소켓 로드 밸런싱 기능 활성화</span>
  <span class="hljs-attr">hostNamespaceOnly:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># 호스트 네임스페이스에만 적용하도록 설정 for integration istio (https://docs.cilium.io/en/latest/network/servicemesh/istio/)</span>
  <span class="hljs-attr">tracing:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># eBPF 소켓 로드 밸런싱 트레이싱 활성화 (디버깅 용도)</span>

<span class="hljs-comment"># Cilium 설정: 호스트 방화벽</span>
<span class="hljs-attr">hostFirewall:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># 호스트 방화벽 기능 활성화</span>

<span class="hljs-comment"># Cilium 설정: 엔드포인트 라우팅</span>
<span class="hljs-attr">endpointRoutes:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># Cilium 엔드포인트 라우팅 활성화 (Pod 간 통신을 위한 라우팅)</span>

<span class="hljs-comment"># egress gateway 기능</span>
<span class="hljs-attr">egressGateway:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># 특정 목적지에만 SNAT을 적용하고 싶을 때 true</span>

<span class="hljs-comment"># Cilum 설정: Pod ip 대역</span>
<span class="hljs-attr">ipv4NativeRoutingCIDR:</span> <span class="hljs-string">"100.64.0.0/18"</span> <span class="hljs-comment"># Pod Custom Networking CIDR 설정</span>

<span class="hljs-comment"># Cilium 설정: IP Masquerade Agent</span>
<span class="hljs-attr">ipMasqAgent:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">config:</span>
    <span class="hljs-attr">nonMasqueradeCIDRs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/16</span>

<span class="hljs-comment"># kube-proxy 대체: 완전히 제거하고 Cilium이 eBPF로 서비스 처리를 담당</span>
<span class="hljs-attr">kubeProxyReplacement:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># iptables와 kube-proxy 완전히 제거</span>

<span class="hljs-comment"># Cilium 설정: istio와의 통합</span>
<span class="hljs-attr">envoy:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># Istio와의 통합을 위해 Envoy를 사용하지 않도록 설정 (Istio가 자체적으로 Envoy를 관리)</span>

<span class="hljs-comment"># Cilium resources 설정</span>
<span class="hljs-attr">resources:</span>
  <span class="hljs-attr">requests:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">100m</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">512Mi</span>
  <span class="hljs-attr">limits:</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">512Mi</span>

<span class="hljs-comment"># Hubble (가시성/관측 도구) 설정</span>
<span class="hljs-attr">hubble:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">relay:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">ui:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>

<span class="hljs-comment"># Prometheus 모니터링 (선택)</span>
<span class="hljs-attr">prometheus:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">serviceMonitor:</span>
    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>

<span class="hljs-comment"># 디버깅 로깅 수준 (선택)</span>
<span class="hljs-attr">debug:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>내가 설정한 helm values는 위와 같다. 이미 AWS VPC CNI가 배포되어 있는 상태이기 때문에 위 helm values를 통해서 Cilium CNI를 helm install해서 배포했다.</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Cilium repo add</span>
helm repo add cilium https://helm.cilium.io/
<span class="hljs-comment"># helm repo update</span>
helm repo update
<span class="hljs-comment"># Cilium Install</span>
helm upgrade --install cilium cilium/cilium -f values.yaml -n kube-system
</code></pre>
<h3>Node taint 설정</h3>
<p>Cilium을 설치하면서 networking은 Cilium이 담당하게 된다. 즉, Cilium Pod가 정상적으로 Running되기 전에는 Node에 다른 Pod들이 설치되거나 실행되면 안되다.</p>
<p>그래서 이러한 설정을 해주기 위해 taint를 설정한다.</p>
<h4>default node group</h4>
<pre><code class="hljs language-ini">resource "aws_eks_node_group" "default_node_group" {
  <span class="hljs-comment"># 중략</span>

  <span class="hljs-comment"># cilium cni가 실행되기 전에 다른 pod들이 scheduling 되지 않도록 한다.</span>
  taint {
    <span class="hljs-attr">key</span>    = <span class="hljs-string">"node.cilium.io/agent-not-ready"</span>
    <span class="hljs-attr">value</span>  = <span class="hljs-string">"true"</span>
    <span class="hljs-attr">effect</span> = <span class="hljs-string">"NO_EXECUTE"</span>
  }
}
</code></pre>
<h4>karpenter nodepool</h4>
<pre><code class="hljs language-yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">karpenter.sh/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">NodePool</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> { { <span class="hljs-string">.Values.nodePool.name</span> } }
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-comment"># 중략</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">startupTaints:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">node.cilium.io/agent-not-ready</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">"true"</span>
          <span class="hljs-attr">effect:</span> <span class="hljs-string">NoExecute</span>
      <span class="hljs-comment"># 중략</span>
</code></pre>
<h3>Remove kube-proxy</h3>
<p>Cilium을 이용해서 kube-proxy를 대체하고 있기 때문에 EKS의 kube-proxy addon을 제거했다.</p>
<p>나는 terraform으로 관리하고 있었기 때문에 eks addon에서 kube-proxy만 제거했다.</p>
<pre><code class="hljs language-ini">resource "aws_eks_addon" "kube_proxy" {
  <span class="hljs-attr">cluster_name</span>  = aws_eks_cluster.main.name
  <span class="hljs-attr">addon_name</span>    = <span class="hljs-string">"kube-proxy"</span>
  <span class="hljs-attr">addon_version</span> = <span class="hljs-string">"v1.33.0-eksbuild.2"</span>
}
</code></pre>
<p>이 부분을 제거했다.</p>
<h3>Result</h3>
<p><img src="/images/posts/contents/install-cilium-eks/installed-cilium.png" alt="installed-cilium"></p>
<p>AWS VPC CNI의 DaemonSet이 aws-node pod와 Cilium CNI의 DaemonSet이 Cilium pod가 동시에 실행되서 정상적으로 동작중인 것을 볼 수 있다.</p>
<p><img src="/images/posts/contents/install-cilium-eks/cilium-status.png" alt="cilium-status"></p>
<p>Cilium pod에 접속해서 cilium status 명령어를 실행해보면 AWS CNI와 chaining이 정상적으로 되어 있고 라우팅이 Native routing을 사용하는 것을 볼 수 있다.</p>
<h4>Hubble monitor</h4>
<p>hubble UI를 통해서 k8s의 namespace별 network를 볼 수 있다.</p>
<p><img src="/images/posts/contents/install-cilium-eks/hubble-ui.png" alt="hubble-ui"></p>
<p>hubble ui를 보면 어떤 components들 간에 네트워크 통신을 하고 있는지 ingress, egress, ip, port, identity까지 확인할 수 있다.</p></div></div><div class="mt-16 pt-8 border-t border-card border-gray-100 dark:border-gray-800"><h2 class="text-2xl font-bold text-foreground mb-6">Comments</h2><div class="giscus-container mt-16"></div></div><footer class="mt-20 pt-10 border-t border-gray-100 dark:border-gray-800 flex flex-col items-center gap-8"><div class="flex items-center gap-4 p-6 bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 w-full"><img alt="Author" loading="lazy" width="64" height="64" decoding="async" data-nimg="1" class="w-16 h-16 rounded-full object-cover border-2 border-sky-400" style="color:transparent" src="/profile.png"/><div><h4 class="font-bold text-gray-900 dark:text-white">Written by Comstering</h4><p class="text-sm text-gray-500">개발과 운영의 경계를 좁히는 클라우드 네이티브 엔지니어입니다.</p></div></div><a class="font-bold text-gray-900 dark:text-white hover:text-sky-500 transition-colors" href="/">모든 글 보기 →</a></footer></article></main><footer class="bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"><div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-sm"><p>© <!-- -->2026<!-- --> Dev Notes. All rights reserved.</p></div></footer><script src="/_next/static/chunks/webpack-9edee2920554d0a5.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7049,[\"874\",\"static/chunks/874-6d7083817be44b40.js\",\"177\",\"static/chunks/app/layout-aff72ef278dd2b27.js\"],\"ThemeProvider\"]\n3:I[6367,[\"874\",\"static/chunks/874-6d7083817be44b40.js\",\"177\",\"static/chunks/app/layout-aff72ef278dd2b27.js\"],\"Header\"]\n4:I[7555,[],\"\"]\n5:I[1295,[],\"\"]\n7:I[9665,[],\"OutletBoundary\"]\na:I[9665,[],\"ViewportBoundary\"]\nc:I[9665,[],\"MetadataBoundary\"]\ne:I[6614,[],\"\"]\n:HL[\"/_next/static/css/368ad53414945bb5.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"wNyKU33sOMrnnzgTkqSwb\",\"p\":\"\",\"c\":[\"\",\"posts\",\"install-cilium-eks\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"id\",\"install-cilium-eks\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/368ad53414945bb5.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"script\",null,{\"async\":true,\"src\":\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2657417531473772\",\"crossOrigin\":\"anonymous\"}]}],[\"$\",\"body\",null,{\"className\":\"min-h-screen flex flex-col font-sans transition-colors duration-500 ease-in-out bg-slate-50 dark:bg-gray-950 text-gray-900 dark:text-gray-100\",\"children\":[\"$\",\"$L2\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"fixed inset-0 overflow-hidden pointer-events-none -z-10\",\"children\":[[\"$\",\"div\",null,{\"className\":\"absolute -top-40 -left-40 w-80 h-80 bg-sky-500/10 dark:bg-sky-500/5 rounded-full blur-[100px]\"}],[\"$\",\"div\",null,{\"className\":\"absolute top-1/2 -right-40 w-96 h-96 bg-indigo-500/10 dark:bg-indigo-500/5 rounded-full blur-[120px]\"}]]}],[\"$\",\"$L3\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-sm\",\"children\":[\"$\",\"p\",null,{\"children\":[\"© \",2026,\" Dev Notes. All rights reserved.\"]}]}]}]]}]}]]}]]}],{\"children\":[\"posts\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"id\",\"install-cilium-eks\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",\"$undefined\",null,[\"$\",\"$L7\",null,{\"children\":[\"$L8\",\"$L9\",null]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"RHbczTgLEF5NgToufB9Vj\",{\"children\":[[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],null]}],[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$e\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"f:I[6874,[\"874\",\"static/chunks/874-6d7083817be44b40.js\",\"63\",\"static/chunks/63-745fd7e3cef5e4b8.js\",\"880\",\"static/chunks/app/posts/%5Bid%5D/page-07794ac7f5eb2364.js\"],\"\"]\n10:I[3063,[\"874\",\"static/chunks/874-6d7083817be44b40.js\",\"63\",\"static/chunks/63-745fd7e3cef5e4b8.js\",\"880\",\"static/chunks/app/posts/%5Bid%5D/page-07794ac7f5eb2364.js\"],\"Image\"]\n12:I[7161,[\"874\",\"static/chunks/874-6d7083817be44b40.js\",\"63\",\"static/chunks/63-745fd7e3cef5e4b8.js\",\"880\",\"static/chunks/app/posts/%5Bid%5D/page-07794ac7f5eb2364.js\"],\"default\"]\n11:T2e1f,"])</script><script>self.__next_f.push([1,"\u003ch2\u003eCilium CNI\u003c/h2\u003e\n\u003ch3\u003eNetworking Mode\u003c/h3\u003e\n\u003cp\u003eCilium에는 Networking Mode가 2가지로 구분된다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOverlay: 캡슐화 기반 가상 네트워크\u003c/li\u003e\n\u003cli\u003eNative routing: Linux Host의 라우팅 테이블을 사용\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAWS VPC CNI Chaining\u003c/h3\u003e\n\u003cp\u003eAWS VPC CNI와 Chaining을 할 때는 위 두 모드 중에서 Native routing mode를 사용해야한다.\u003c/p\u003e\n\u003cp\u003eNative Routing에능 아래와 같은 내용이 적혀있다.\u003c/p\u003e\n\u003cp\u003eWhen to use this mode: This mode is for advanced users and requires some awareness of the underlying networking infrastructure. This mode works well with:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNative IPv6 networks\u003c/li\u003e\n\u003cli\u003eIn conjunction with cloud network routers\u003c/li\u003e\n\u003cli\u003eIf you are already running routing daemons\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAWS VPC CNI를 사용하면 routing daemon을 AWS VPC CNI가 담당하기 때문에 overlay mode가 아닌 Native routing mode로 네트워킹을 선택해야한다.\u003c/p\u003e\n\u003ch2\u003eInstall Cilium CNI in EKS\u003c/h2\u003e\n\u003ch3\u003ehelm values\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-comment\"\u003e# Kube-Proxy를 삭제할 경우 반드시 필요\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ek8sServiceHost:\u003c/span\u003e { \u003cspan class=\"hljs-string\"\u003eeks-api-endpoint\u003c/span\u003e }\n\u003cspan class=\"hljs-attr\"\u003ek8sServicePort:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e443\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003ecluster:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e { \u003cspan class=\"hljs-string\"\u003ecluster\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ename\u003c/span\u003e }\n  \u003cspan class=\"hljs-attr\"\u003eid:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# CNI 설정: VPC CNI와 chaining 모드로 사용\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ecni:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003echainingMode:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eaws-cni\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# AWS CNI와 연결되는 chaining 모드 사용\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eexclusive:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# aws-node DaemonSet도 계속 실행되도록 허용\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Cilium 설정: ENI 기반 라우팅을 사용하여 VPC와 통합\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eroutingMode:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enative\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# 네이티브 라우팅 모드를 사용하여 터널링을 비활성화합니다.\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Masquerade (SNAT) 설정: 필요한 경우에만 eBPF를 사용하여 SNAT 수행\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ebpf:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003emasquerade:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# 활성화를 하면 ipv4NativeRoutingCIDR values에 해당하는 대역과 native Route Table에서 local로 보내는 Rule이 있는 대역 제외 모든 대역에 대해 eBPF를 활용한 SNAT 활성화\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#  # 이 설정은 cni chaining을 하고 있다면 사용 불가\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e#  hostLegacyRouting: false   # host network에서 발생하는 트래픽에 대해 legacy routing(iptables)를 사용하지 않도록 설정, eBPF를 사용하여 처리\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# bpf.masquerade 설정: eBPF 기반 SNAT 활성화(NodePort 활설화 필수)\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003enodePort:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# NodePort 서비스에 대한 eBPF 기반 처리 활성화\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Cilium 설정: eBPF 소켓 로드 밸런싱\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003esocketLB:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Cilium의 eBPF 소켓 로드 밸런싱 기능 활성화\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ehostNamespaceOnly:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# 호스트 네임스페이스에만 적용하도록 설정 for integration istio (https://docs.cilium.io/en/latest/network/servicemesh/istio/)\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003etracing:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# eBPF 소켓 로드 밸런싱 트레이싱 활성화 (디버깅 용도)\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Cilium 설정: 호스트 방화벽\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ehostFirewall:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# 호스트 방화벽 기능 활성화\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Cilium 설정: 엔드포인트 라우팅\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eendpointRoutes:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Cilium 엔드포인트 라우팅 활성화 (Pod 간 통신을 위한 라우팅)\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# egress gateway 기능\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eegressGateway:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# 특정 목적지에만 SNAT을 적용하고 싶을 때 true\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Cilum 설정: Pod ip 대역\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eipv4NativeRoutingCIDR:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"100.64.0.0/18\"\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Pod Custom Networking CIDR 설정\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Cilium 설정: IP Masquerade Agent\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eipMasqAgent:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003econfig:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003enonMasqueradeCIDRs:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e10.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e/16\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# kube-proxy 대체: 완전히 제거하고 Cilium이 eBPF로 서비스 처리를 담당\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ekubeProxyReplacement:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# iptables와 kube-proxy 완전히 제거\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Cilium 설정: istio와의 통합\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eenvoy:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e# Istio와의 통합을 위해 Envoy를 사용하지 않도록 설정 (Istio가 자체적으로 Envoy를 관리)\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Cilium resources 설정\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eresources:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003erequests:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecpu:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e100m\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ememory:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e512Mi\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003elimits:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ememory:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e512Mi\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Hubble (가시성/관측 도구) 설정\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ehubble:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003erelay:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eui:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# Prometheus 모니터링 (선택)\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eprometheus:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eserviceMonitor:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e# 디버깅 로깅 수준 (선택)\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003edebug:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eenabled:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e내가 설정한 helm values는 위와 같다. 이미 AWS VPC CNI가 배포되어 있는 상태이기 때문에 위 helm values를 통해서 Cilium CNI를 helm install해서 배포했다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-comment\"\u003e# Cilium repo add\u003c/span\u003e\nhelm repo add cilium https://helm.cilium.io/\n\u003cspan class=\"hljs-comment\"\u003e# helm repo update\u003c/span\u003e\nhelm repo update\n\u003cspan class=\"hljs-comment\"\u003e# Cilium Install\u003c/span\u003e\nhelm upgrade --install cilium cilium/cilium -f values.yaml -n kube-system\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eNode taint 설정\u003c/h3\u003e\n\u003cp\u003eCilium을 설치하면서 networking은 Cilium이 담당하게 된다. 즉, Cilium Pod가 정상적으로 Running되기 전에는 Node에 다른 Pod들이 설치되거나 실행되면 안되다.\u003c/p\u003e\n\u003cp\u003e그래서 이러한 설정을 해주기 위해 taint를 설정한다.\u003c/p\u003e\n\u003ch4\u003edefault node group\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ini\"\u003eresource \"aws_eks_node_group\" \"default_node_group\" {\n  \u003cspan class=\"hljs-comment\"\u003e# 중략\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment\"\u003e# cilium cni가 실행되기 전에 다른 pod들이 scheduling 되지 않도록 한다.\u003c/span\u003e\n  taint {\n    \u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e    = \u003cspan class=\"hljs-string\"\u003e\"node.cilium.io/agent-not-ready\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e  = \u003cspan class=\"hljs-string\"\u003e\"true\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eeffect\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"NO_EXECUTE\"\u003c/span\u003e\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4\u003ekarpenter nodepool\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003eapiVersion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ekarpenter.sh/v1\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ekind:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eNodePool\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emetadata:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e { { \u003cspan class=\"hljs-string\"\u003e.Values.nodePool.name\u003c/span\u003e } }\n\u003cspan class=\"hljs-attr\"\u003espec:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003etemplate:\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e# 중략\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003espec:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003estartupTaints:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ekey:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003enode.cilium.io/agent-not-ready\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003evalue:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"true\"\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003eeffect:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eNoExecute\u003c/span\u003e\n      \u003cspan class=\"hljs-comment\"\u003e# 중략\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eRemove kube-proxy\u003c/h3\u003e\n\u003cp\u003eCilium을 이용해서 kube-proxy를 대체하고 있기 때문에 EKS의 kube-proxy addon을 제거했다.\u003c/p\u003e\n\u003cp\u003e나는 terraform으로 관리하고 있었기 때문에 eks addon에서 kube-proxy만 제거했다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ini\"\u003eresource \"aws_eks_addon\" \"kube_proxy\" {\n  \u003cspan class=\"hljs-attr\"\u003ecluster_name\u003c/span\u003e  = aws_eks_cluster.main.name\n  \u003cspan class=\"hljs-attr\"\u003eaddon_name\u003c/span\u003e    = \u003cspan class=\"hljs-string\"\u003e\"kube-proxy\"\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eaddon_version\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"v1.33.0-eksbuild.2\"\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 부분을 제거했다.\u003c/p\u003e\n\u003ch3\u003eResult\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/contents/install-cilium-eks/installed-cilium.png\" alt=\"installed-cilium\"\u003e\u003c/p\u003e\n\u003cp\u003eAWS VPC CNI의 DaemonSet이 aws-node pod와 Cilium CNI의 DaemonSet이 Cilium pod가 동시에 실행되서 정상적으로 동작중인 것을 볼 수 있다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/contents/install-cilium-eks/cilium-status.png\" alt=\"cilium-status\"\u003e\u003c/p\u003e\n\u003cp\u003eCilium pod에 접속해서 cilium status 명령어를 실행해보면 AWS CNI와 chaining이 정상적으로 되어 있고 라우팅이 Native routing을 사용하는 것을 볼 수 있다.\u003c/p\u003e\n\u003ch4\u003eHubble monitor\u003c/h4\u003e\n\u003cp\u003ehubble UI를 통해서 k8s의 namespace별 network를 볼 수 있다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/contents/install-cilium-eks/hubble-ui.png\" alt=\"hubble-ui\"\u003e\u003c/p\u003e\n\u003cp\u003ehubble ui를 보면 어떤 components들 간에 네트워크 통신을 하고 있는지 ingress, egress, ip, port, identity까지 확인할 수 있다.\u003c/p\u003e"])</script><script>self.__next_f.push([1,"6:[\"$\",\"article\",null,{\"className\":\"max-w-3xl mx-auto\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-12 space-y-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex justify-center\",\"children\":[\"$\",\"$Lf\",null,{\"href\":\"/\",\"className\":\"text-xs font-bold text-sky-500 flex items-center hover:gap-2 transition-all\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"className\":\"h-4 w-4 mr-2\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"stroke\":\"currentColor\",\"children\":[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":2,\"d\":\"M15 19l-7-7 7-7\"}]}],\"BACK TO BLOG\"]}]}],[\"$\",\"div\",null,{\"className\":\"text-center space-y-4\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-4xl md:text-5xl font-black text-gray-900 dark:text-white leading-tight\",\"children\":\"EKS에 Cilium CNI 설치하기 (with CNI Chaining AWS VPC CNI Plugin)\"}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-center gap-4 text-sm text-gray-500 font-medium\",\"children\":[[\"$\",\"span\",null,{\"children\":\"2025-09-01\"}],[\"$\",\"span\",null,{\"className\":\"w-1 h-1 bg-gray-300 rounded-full\"}],[\"$\",\"span\",null,{\"children\":\"6 min read\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"rounded-3xl overflow-hidden shadow-2xl shadow-sky-500/10 border border-gray-200 dark:border-gray-800 aspect-[21/9]\",\"children\":[\"$\",\"$L10\",null,{\"src\":\"/images/posts/thumbnails/eks-cilium.png\",\"alt\":\"EKS에 Cilium CNI 설치하기 (with CNI Chaining AWS VPC CNI Plugin)\",\"width\":840,\"height\":360,\"className\":\"w-full h-full object-cover\"}]}]]}],[\"$\",\"div\",null,{\"className\":\"prose prose-lg dark:prose-invert max-w-none\",\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$11\"}}]}],[\"$\",\"div\",null,{\"className\":\"mt-16 pt-8 border-t border-card border-gray-100 dark:border-gray-800\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-2xl font-bold text-foreground mb-6\",\"children\":\"Comments\"}],[\"$\",\"$L12\",null,{\"repo\":\"comstering/comstering.github.io\",\"repoId\":\"MDEwOlJlcG9zaXRvcnkzNjI0MjQ3NDk=\",\"category\":\"Announcements\",\"categoryId\":\"MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyOTQ4OTYw\",\"mapping\":\"pathname\",\"strict\":\"0\",\"reactionsEnabled\":\"1\",\"emitMetadata\":\"0\",\"inputPosition\":\"top\",\"theme\":\"preferred_color_scheme\",\"lang\":\"ko\",\"loading\":\"lazy\"}]]}],[\"$\",\"footer\",null,{\"className\":\"mt-20 pt-10 border-t border-gray-100 dark:border-gray-800 flex flex-col items-center gap-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-4 p-6 bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 w-full\",\"children\":[[\"$\",\"$L10\",null,{\"src\":\"/profile.png\",\"width\":64,\"height\":64,\"className\":\"w-16 h-16 rounded-full object-cover border-2 border-sky-400\",\"alt\":\"Author\"}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h4\",null,{\"className\":\"font-bold text-gray-900 dark:text-white\",\"children\":\"Written by Comstering\"}],[\"$\",\"p\",null,{\"className\":\"text-sm text-gray-500\",\"children\":\"개발과 운영의 경계를 좁히는 클라우드 네이티브 엔지니어입니다.\"}]]}]]}],[\"$\",\"$Lf\",null,{\"href\":\"/\",\"className\":\"font-bold text-gray-900 dark:text-white hover:text-sky-500 transition-colors\",\"children\":\"모든 글 보기 →\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n8:null\n"])</script><script>self.__next_f.push([1,"9:null\nd:[[\"$\",\"title\",\"0\",{\"children\":\"Comstering's Dev Notes\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Comstering's personal development blog\"}],[\"$\",\"meta\",\"2\",{\"name\":\"keywords\",\"content\":\"Comstering, 개발 블로그, Dev Notes, Programming, Software Development\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"1024x1024\"}]]\n"])</script></body></html>